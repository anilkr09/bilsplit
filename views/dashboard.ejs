<!DOCTYPE html>
<html>
  <head>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"> -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/css/bootstrap.min.css"> 

    
    <style>
      form{
        padding-bottom: 10px;
      }
    
    </style>
  </head>
  <body>  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">splitx</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item active">
          <a class="nav-link" href="./dashboard">DASHBOARD <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./expense">ADD EXPENSES</a>
         
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="./addfriend">ADD FRIENDS <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          
          <form action="/logout?_method=DELETE" method ="POST">
            <button type ="submit" style="border:none"><a class="nav-link" >LOGOUT</a></button>
            </form>
        </li>

      </ul>

    </div>
  </nav>
</br></br></br></br>
  <div class='container jumbotron text-center '>
      <div id="main"></div>
    </div>
        <!-- <ul class="list-group">
            <li class="list-group-item active" aria-current="true">An active item</li>
            <li class="list-group-item">A second item</li>
            <li class="list-group-item">A third item</li>
            <li class="list-group-item">A fourth item</li>
            <li class="list-group-item">And a fifth one</li>
          </ul>
          <table class="table">
            <thead> -->
              <!-- <tr>
                <th scope="col">#</th>
                <th scope="col">Username</th>
                <th scope="col">Expense-share</th>
                <th scope="col">Expense-paid </th>
              </tr>
            </thead>
            <tbody>
              <tr> -->
                <!-- <th scope="row">1</th>
                <td>Mark</td>
                <td>Otto</td>
                <td>@mdo</td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>@fat</td>
              </tr>
              -->
             


<!-- <h1>Add Expense</h1> -->


<!-- <form action="/expense" method="POST">
  
  <div id="main">
    
    <input type="button" id="btAdd" value="ADD USER" class="bt" />
    <input type="button" id="btRemove" value="REMOVE USER" class="bt" />
    <p>Name:<input type="text" name="name"/></p>
    <p> Total Expense:<input type="text" name="expense"/></p>
</div>
<button type="submit">Submit</button>
</form>


<form action="/logout?_method=DELETE" method ="POST">
<button type ="submit">Log Out </button>
</form> -->

</body>       
<script>
  let data ='<%-JSON.stringify(data)%>';
  data =JSON.parse(data);
  console.log(data)
    $(document).ready(function() {
      

               var container= $(document.createElement('div'));
               
               
                data.forEach((expense)=>{
                  
                    var div1 = document.createElement('div');
                    $(div1).append("<h4>Name - "+expense.name+"</h4>");
                    $(div1).append("<h4>Amount - "+expense.amount+"</h4>");
                    $(div1).append('</br>')
                    var table1 = document.createElement('table');
                    table1.className="table";

                    $(table1).append('<thead><tr><th scope="col">#</th><th scope="col">Username</th>'+' <th scope="col">Expense-share</th>'+'<th scope="col">Expense-paid </th></tr></thead>');
                    $(div1).append(table1);

                    // $(div1).append('<table class="table">'+'<thead><tr><th >#</th><th >Username</th>'+' <th>Expense-share</th>'+'<th >Expense-paid </th></tr></thead><tbody>');
                        // $(div1).append('<tr><th scope="row">2</th><td >Jacob</td><td>Th  ornton</td><td>fat</td></tr>')
                     
                     
                        var i=1;
                  expense.UserDetails.forEach((item)=>{
                   

                   var row = $(document.createElement('tr'));
                   $(row).append('<th >'+i+'</th');
                  $(row).append( "<td >"+item.user_name+'</td>' );
                  $(row).append( "<td >"+item.shareAmount+'</td>' );
                  $(row).append( "<td >"+item.sharePaid+'</td>' );
                    
                  // $(div1).append(row);
                  $(table1).append(row);

                  i++;
            })

          




                  // $(div1).append('</tbody></table>');
                  


                $(div1).append('</br>')





                
                  var table1 = document.createElement('table');
                    table1.className="table";

                    $(table1).append('<thead><tr><th scope="col">#</th><th scope="col">User</th>'+' <th scope="col">Owes to</th>'+'<th scope="col">Amount</th></tr></thead>');
                    

                    // $(div1).append('<table class="table">'+'<thead><tr><th >#</th><th >Username</th>'+' <th>Expense-share</th>'+'<th >Expense-paid </th></tr></thead><tbody>');
                        // $(div1).append('<tr><th scope="row">2</th><td >Jacob</td><td>Th  ornton</td><td>fat</td></tr>')
                     
                     
                    var i=1;
                    expense.Payments.forEach((item)=>{
                    

                    var row = $(document.createElement('tr'));
                    $(row).append('<th >'+i+'</th');
                    $(row).append( "<td >"+item.person1+'</td>' );
                    $(row).append( "<td >"+item.person2+'</td>' );
                    $(row).append( "<td >"+item.amount+'</td>' );
                      
                    // $(div1).append(row);
                    $(table1).append(row);

                    i++;
                    })
                    $(div1).append(table1);
          
                    



                  // $(div1).append('</tbody></table>');
                  















                 
                  $(container).append(div1);

                    $(container).append('</br></br></br></br></br>')


                  // var div1 = document.createElement('div');
                  //   $(div1).append("<h4>Name::"+expense.name+"</h4>");
                  //   $(div1).append("<h4>Amount::"+expense.amount+"</h4>");
                    

                 
                  // $(container).append(div1);




                 
                }
                )


                 $('#main').append(container);
            }
        
    );
 
</script>
</html>

