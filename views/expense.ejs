<!DOCTYPE html>
<html>
  <head>
       <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"> -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script> -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"> 

  
    <style>
      form{
        padding-bottom: 10px;
      }
     
    </style>
  </head>
  <body>  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">splitx</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item active">
          <a class="nav-link" href="./dashboard">DASHBOARD <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./expense">ADD EXPENSES</a>
         
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="./addfriend">ADD FRIENDS <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          
          <form action="/logout?_method=DELETE" method ="POST">
            <button type ="submit" style="border:none"><a class="nav-link" >LOGOUT</a></button>
            </form>
        </li>

      </ul>
   
    </div>
  </nav>
</br></br></br></br>
    <div class='container jumbotron text-center '>



<h1>Add Expense</h1>

<!-- onsubmit="return validateForm()"  -->
<form action="/expense" method="POST">
  
  <div id="main">
    
    <input type="button" id="btAdd" value="ADD USER" class="bt" />

    <input type="button" id="btRemove" value="REMOVE USER" class="bt" />
  </br>  </br>
    <p>Name:<input type="text" name="name" Required/></p>
  
    <p> Total Expense:<input type="text" name="expense" Required/></p>
  
</div>

<button type="submit">Submit</button>
</form>

</br>

</body>       
<script>


    $(document).ready(function() {
      let data ='<%-JSON.stringify(data)%>';
  data =JSON.parse(data);
  var current_id= data.id;


var container= $(document.createElement('div'));

var div1 = document.createElement('div');
$(div1).append('<h4> You</h4>');
$(div1).append('<input style="display:none" name="userid" value="'+current_id+'" /> ');

$(div1).append('<label>shareamount:</label>');
$(div1).append('<input type="text" name="shareamount" id="name" Required>');
$(container).append(div1);

var div1 = document.createElement('div');
$(div1).append('<label>sharepaid:</label>');
$(div1).append('<input type="text" name="sharepaid" id="name" Required>');
$(container).append(div1);

var div1 = document.createElement('div');
                $(container).append("<h4 >Friend1</h4>");
                $(div1).append('<label for="users">User</label>');
                $(div1).append('<input type="text" name="userid" list="useroptions" Required></br>');

$(div1).append('<label>shareamount:</label>');
$(div1).append('<input type="text" name="shareamount" id="name" Required>');
$(container).append(div1);
var div1 = document.createElement('div');
$(div1).append('<label>sharepaid:</label>');
$(div1).append('<input type="text" name="sharepaid" id="name" Required>');
var list1 = $(document.createElement('datalist')).attr('id','useroptions');
if(data.users)
data.users.forEach((item)=>{

  $(list1).append( '<option value="'+item.user_id+'"> '+ item.name +'---'+item.email+'</option>' );

}
)

$(div1).append(list1);
$(container).append(div1);
$('#main').append(container);

        var iCnt = 1;
        $('#btAdd').click(function() {
         
             if (iCnt <= 19) {

                iCnt = iCnt + 1;

                 var container= $(document.createElement('div')).attr('id', 'divid'+iCnt);
                      
              
                var div1 = document.createElement('div');
                $(container).append("<h4 >Friend"+iCnt + "</h4>");
                $(div1).append('<label for="users">User</label>');
                $(div1).append('<input type="text" name="userid" list="useroptions" Required>');
                $(container).append(div1);
               


                var div1 = document.createElement('div');
                $(div1).append('<label>shareamount:</label>');
                $(div1).append('<input type="text" name="shareamount" id="name" Required>');
                $(container).append(div1);
               var div1 = document.createElement('div');
                $(div1).append('<label>sharepaid:</label>');
                $(div1).append('<input type="text" name="sharepaid" id="name" Required>');
                
                var list1 = $(document.createElement('datalist')).attr('id','useroptions');
                if(data.users)
                data.users.forEach((item)=>{

                  $(list1).append( '<option value="'+item.user_id+'"> '+ item.name +'---'+item.email+'</option>' );

                }
                )

                $(div1).append(list1);



                


                $(container).append(div1);

                 $('#main').append(container);
            }
        
        });
      
        $('#btRemove').click(function() {
            if (iCnt != 1) { $('#divid' + iCnt).remove(); iCnt = iCnt - 1; }
        });
    });
    

 
</script>

</html>